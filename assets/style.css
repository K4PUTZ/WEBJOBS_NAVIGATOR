:root {
  --bg: #2b2b2b;
  --panel: #1f1f1f;
  --text: #eaeaea;
  --muted: #9aa0a6;
  --accent: #ffc107;
  --cyan: #0dcaf0;
  --green: #22c55e;
  --danger: #dc3545;
}
* { box-sizing: border-box; }
body { margin: 0; background: var(--bg); color: var(--text); font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }

/* Container with maximum width and centering */
.app { 
  max-width: 1400px; 
  margin: 0 auto; 
  padding: 12px 20px; 
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
.topbar { display: flex; align-items: center; justify-content: space-between; padding: 6px 4px 10px; }
.brand { display: flex; align-items: center; gap: 16px !important; font-weight: 600; color: var(--text); }
.logo { height: 24px; width: auto; margin-right: 8px !important; }
.toolbar .tool { margin-left: 8px; background: transparent; color: var(--text); border: 1px solid #444; padding: 6px 10px; border-radius: 6px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; height: 32px; line-height: 1; font-size: 14px; }
.toolbar .tool:link, .toolbar .tool:visited { color: var(--text); text-decoration: none; }
.toolbar .tool:hover { border-color: #666; }
.tool .icon { margin-right: 6px; }
.grid { display: grid; grid-template-columns: 3fr 1fr; gap: 12px; flex: 1; min-height: 0; }
.card { background: var(--panel); border: 1px solid #3a3a3a; border-radius: 8px; padding: 10px; }
.console-header { margin-bottom: 10px; }
.console-header h3 { margin: 0; }
.console-footer { margin-top: 10px; text-align: right; }
.console-text { 
  flex: 1;
  min-height: 200px; 
  overflow: auto; 
  background: #121212; 
  color: #fafafa; 
  padding: 12px; 
  margin: 0; 
  border-radius: 6px; 
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; 
  font-size: 11px !important;
  line-height: 1.4;
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-wrap: break-word;
}
.console.card {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.row-right { display: flex; justify-content: flex-end; margin-top: 6px; }
.btn { background: #3a3a3a; color: var(--text); border: 1px solid #555; padding: 6px 10px; border-radius: 6px; cursor: pointer; }
.btn-xs { padding: 3px 6px; font-size: 12px; }
.btn:disabled { opacity: 0.6; cursor: not-allowed; }
.fav .btn:disabled .label { color: var(--muted); }
.sidebar { display: flex; flex-direction: column; gap: 12px; height: 100%; }
.sku-field { width: 100%; background: #2b2b2b; color: var(--cyan); border: 1px solid #3a3a3a; padding: 8px; border-radius: 6px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.fav-list { display: grid; grid-template-columns: 1fr; gap: 6px; }
.fav { display:flex; align-items:center; gap: 8px; }
.fav .label { color: var(--cyan); display: inline-block; width: 100%; text-align: center; }
.fav .key { color: var(--muted); width: 28px; text-align: right; }
.fav .btn { flex: 1; width: 100%; text-align: center; }
.recents { margin: 6px 0 0; padding-left: 18px; max-height: none; overflow: auto; flex: 1; }
.sidebar .card:last-child { flex: 1; display: flex; flex-direction: column; }
.recents a { display: inline-block; max-width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.card h4 { display: flex; align-items: center; justify-content: space-between; }
.recents li { padding: 2px 0; color: var(--muted); }
.statusbar { display:flex; gap: 16px; align-items:center; margin-top: 10px; padding: 8px; background: var(--panel); border: 1px solid #3a3a3a; border-radius: 8px; font-size: 12px; }
.statusbar.stacked { flex-direction: column; align-items: stretch; gap: 6px; }
.status-row { display: flex; align-items: center; gap: 12px; width: 100%; }
.statusbar .version { margin-left: auto; }
.status.offline { color: var(--muted); }
.status.online { color: var(--green); }
.hint { color: var(--muted); font-size: 12px; margin-top: 6px; }
.link { color: var(--cyan); text-decoration: none; }

.line-error { color: var(--danger); font-weight: 500; }
.line-warning { color: #ffc107; }
.line-success { color: var(--green); }
.line-hint { color: #ff69b4; }
.line-sku { color: var(--cyan); font-weight: 600; }
.sku-inline { color: var(--cyan); font-weight: 600; }
.line-info { color: var(--text); }

.console-text .line div {
  padding: 2px 0;
  border-left: 3px solid transparent;
}

.console-text .line-error div {
  border-left-color: var(--danger);
  background: rgba(220, 53, 69, 0.1);
}

/* Version styling */
.version { 
  color: var(--muted); 
  font-size: 11px; 
  font-family: ui-monospace, monospace; 
}

/* Modal styles */
.modal {
  position: fixed;
  z-index: 2000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Prevent background scroll when modal is open */
body.modal-open {
  overflow: hidden;
}

  .modal-content {
    background: var(--panel);
    border: 1px solid #3a3a3a;
    border-radius: 8px;
    width: 92%;
    max-width: 900px;
    max-height: 88vh;
    overflow: auto;
  }

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid #3a3a3a;
}

.modal-header h3 {
  margin: 0;
  color: var(--text);
}

.btn-close {
  background: none;
  border: none;
  color: var(--muted);
  font-size: 24px;
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-close:hover {
  color: var(--text);
}

.modal-body {
  padding: 20px;
}

.modal-body h4 {
  color: var(--text);
  margin: 0 0 16px 0;
}

.settings-note { margin-top: 10px; text-align: center; }
.settings-note img { max-width: 100%; height: auto; display: block; opacity: 0.9; border-radius: 4px; margin: 0 auto; }

.favorites-editor {
  display: grid;
  gap: 12px;
  margin-bottom: 20px;
}

.favorite-item {
  display: grid;
  grid-template-columns: 30px 1fr 2fr;
  gap: 8px;
  align-items: center;
  padding: 8px;
  background: var(--bg);
  border: 1px solid #3a3a3a;
  border-radius: 4px;
}

.favorite-header {
  display: grid;
  grid-template-columns: 30px 1fr 2fr;
  gap: 8px;
  align-items: center;
  color: var(--muted);
  font-size: 12px;
  padding: 0 4px;
}

.favorite-item .key {
  color: var(--muted);
  font-weight: bold;
  text-align: center;
}

.favorite-item input {
  background: var(--bg);
  border: 1px solid #3a3a3a;
  border-radius: 4px;
  padding: 6px 8px;
  color: var(--text);
  font-size: 14px;
}

/* Inputs style for editable slots (2..8) */
.favorite-item:not(.slot-first) input {
  background: #ffffff;
  color: #000000;
}

.favorite-item input:focus {
  outline: none;
  border-color: var(--cyan);
}

  .modal-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    padding-top: 16px;
    border-top: 1px solid #3a3a3a;
  }

.btn-primary {
  background: var(--cyan);
  color: #000;
  border: none;
}

/* Settings options toggles */
.settings-options { 
  display: grid; 
  grid-template-columns: 1fr 1fr; 
  gap: 10px; 
  margin: 10px 0 14px; 
}
.settings-options label { display: flex; align-items: center; gap: 8px; color: var(--text); }
.settings-options input[type="checkbox"] { accent-color: var(--cyan); }

  /* Welcome modal layout */
.welcome-content { max-width: 960px; }
.welcome-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 12px; }
.slides { position: relative; background: #111; border: 1px solid #333; border-radius: 6px; overflow: hidden; min-height: 340px; display: flex; align-items: center; justify-content: center; }
.slides img { max-width: 100%; height: auto; display: none; }
.slides img.active { display: block; }
.welcome-text { margin-top: 10px; color: var(--text); }
.welcome-text h4 { margin: 8px 0 6px; }
.welcome-text p { margin: 0 0 10px; color: var(--muted); }
.welcome-inline-options { margin: 6px 0 8px; }
.welcome-inline-options label { display: inline-flex; align-items:center; gap:8px; margin-right: 12px; }
.welcome-nav { display: flex; align-items: center; justify-content: space-between; margin-top: 8px; }
.pager { color: var(--muted); font-family: ui-monospace, monospace; }
.welcome-options h4 { margin: 0 0 8px 0; }

/* About modal (new) */
.about-panel { width: 520px; max-width: 95vw; }
.about-wrap { display: grid; grid-template-rows: auto auto 1fr auto; gap: 10px; }
.about-top { text-align: left; }
.about-top-logo { height: 18px; width: auto; }
.about-title { margin-top: 8px; font-weight: 600; }
.about-ver { font-family: ui-monospace, monospace; color: var(--muted); }
.about-sep { border-top: 1px solid #3a3a3a; margin-top: 6px; opacity: 0.9; }
.about-info p { margin: 4px 0; }
.about-sofa { display: flex; justify-content: flex-end; }
.about-sofa-img { width: 200px; height: auto; border-radius: 8px; border: 0; }

/* Header action buttons in card titles */
.card h4 .btn { font-size: 12px; padding: 4px 8px; }
.btn .icon { margin-right: 6px; }
.btn-search-glow { border-color: var(--cyan); box-shadow: 0 0 0 2px rgba(13,202,240,0.35), 0 0 12px rgba(13,202,240,0.55); }
.btn-search-glow:hover { box-shadow: 0 0 0 2px rgba(13,202,240,0.45), 0 0 14px rgba(13,202,240,0.7); }

/* Responsive breakpoints */
@media (max-width: 960px) {
  .grid { grid-template-columns: 1fr; }
  .app { padding: 12px 16px; }
}

@media (min-width: 1600px) {
  .app { max-width: 1200px; }
}

@media (max-width: 480px) {
  .app { padding: 8px 12px; }
  .topbar { flex-direction: column; gap: 8px; align-items: stretch; }
}
/* Header action buttons in card titles */
.card h4 .btn { font-size: 12px; padding: 4px 8px; }
.btn .icon { margin-right: 6px; }
.btn-search-glow { border-color: var(--cyan); box-shadow: 0 0 0 2px rgba(13,202,240,0.35), 0 0 12px rgba(13,202,240,0.55); }
.btn-search-glow:hover { box-shadow: 0 0 0 2px rgba(13,202,240,0.45), 0 0 14px rgba(13,202,240,0.7); }
  /* Settings: Working folder row */
  .settings-working {
    display: grid;
    grid-template-columns: 140px 1fr auto;
    gap: 10px;
    align-items: center;
    margin: 16px 0 4px;
  }
  .settings-working .sw-label { color: var(--text); }
  #workingFolderInput {
    background: var(--bg);
    border: 1px solid #3a3a3a;
    border-radius: 6px;
    padding: 8px;
    color: var(--text);
  }

  /* Working bar below status */
.workingbar { display: flex; gap: 12px; align-items: center; font-size: 12px; }
.workingbar .working-left { font-size: 14px; }
.statusbar.stacked .workingbar { padding: 0; margin: 0; }
  .workingbar .working-left { display: flex; align-items: center; gap: 8px; }
  .workingbar .working-right { margin-left: auto; display: flex; align-items: center; gap: 8px; }
  .workingbar .wlabel { color: var(--text); font-weight: 600; }
  .workingbar .working-display { color: var(--text); }
  .workingbar .wbase { color: var(--text); }
  .workingbar .wnew { color: var(--cyan); }
  #skuSuffixInput { 
    background: #2b2b2b; 
    color: var(--text); 
    border: 1px solid #3a3a3a; 
    padding: 6px 8px; 
    border-radius: 6px; 
    min-width: 220px; 
  }

  /* Separator in settings */
  .settings-separator {
    margin: 10px 0 12px;
    border-top: 1px solid #3a3a3a;
    opacity: 0.9;
  }
  .settings-blank { height: 12px; }

/* Welcome Wizard (new) */
.welcome-wizard { width: 600px; height: 700px; max-width: 95vw; max-height: 92vh; display: flex; flex-direction: column; }
.welcome-wizard .modal-body { flex: 1; display: flex; flex-direction: column; }
.wwrap { display: grid; grid-template-rows: auto auto auto auto 1fr auto; gap: 10px; height: 100%; }
.wz-image { display: flex; justify-content: center; align-items: center; }
.wz-image img { max-width: 90%; height: auto; border-radius: 6px; }
.wz-text { text-align: center; color: var(--text); white-space: pre-wrap; }
.wz-sep { border-top: 1px solid #3a3a3a; margin: 8px auto 0; width: 92%; opacity: 0.9; padding-bottom: 8px; }
.wz-controls { display: grid; justify-content: center; gap: 8px; color: var(--text); }
.wz-controls .row { display: flex; justify-content: center; gap: 8px; }
.wz-controls label { display: inline-flex; align-items: center; gap: 8px; }
.wz-controls input[type="text"] { background: var(--bg); border: 1px solid #3a3a3a; border-radius: 6px; padding: 6px 8px; color: var(--text); min-width: 280px; }
.wz-nav { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; margin-top: 6px; }
.wz-nav .btn { justify-self: start; }
.wz-nav .btn.btn-primary { justify-self: end; }
.wz-dots { display: flex; gap: 8px; justify-content: center; }
.wz-dot { width: 8px; height: 8px; border-radius: 50%; background: #888; opacity: 0.9; box-shadow: none; }
.wz-dot.active { background: #fff; width: 10px; height: 10px; box-shadow: 0 0 6px rgba(255,255,255,0.7); }
.wz-tip { color: var(--muted); font-style: italic; font-size: 12px; text-align: center; }
